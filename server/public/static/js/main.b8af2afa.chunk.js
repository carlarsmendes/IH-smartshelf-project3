(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){},53:function(e,t,a){e.exports=a(90)},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),i=a.n(l),o=(a(37),a(124)),s=a(7),c=a(8),u=a(10),m=a(9),h=a(11),d=a(125),b=a(52),p=a(3),g=a(48),f=a(92),E=a(93),v=a(94),y=a(95),k=a(96),I=a(17),C=a(18),O=[{altText:'"What an amazing app! Now I can share my books with everyone from my company"'},{altText:"Amazing!"},{altText:'"Love it!"'}],j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={activeIndex:0},a.next=a.next.bind(Object(p.a)(Object(p.a)(a))),a.previous=a.previous.bind(Object(p.a)(Object(p.a)(a))),a.goToIndex=a.goToIndex.bind(Object(p.a)(Object(p.a)(a))),a.onExiting=a.onExiting.bind(Object(p.a)(Object(p.a)(a))),a.onExited=a.onExited.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onExiting",value:function(){this.animating=!0}},{key:"onExited",value:function(){this.animating=!1}},{key:"next",value:function(){if(!this.animating){var e=this.state.activeIndex===O.length-1?0:this.state.activeIndex+1;this.setState({activeIndex:e})}}},{key:"previous",value:function(){if(!this.animating){var e=0===this.state.activeIndex?O.length-1:this.state.activeIndex-1;this.setState({activeIndex:e})}}},{key:"goToIndex",value:function(e){this.animating||this.setState({activeIndex:e})}},{key:"render",value:function(){var e=this,t=this.state.activeIndex,a=O.map(function(t){return r.a.createElement(g.a,{onExiting:e.onExiting,onExited:e.onExited,key:t.src},r.a.createElement("img",{src:t.src,alt:t.altText}),r.a.createElement(f.a,{captionText:t.caption,captionHeader:t.caption}))});return r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"home-header"},r.a.createElement("img",{src:"../../../images/logo.svg",alt:"logo"}),r.a.createElement("h2",null,"Smart Shelf"),r.a.createElement(E.a,{href:"/signup",className:"button-home",color:"primary",size:"lg","border-radius":"30px",block:!0},"Get Started")),r.a.createElement("div",{className:"home-features"},r.a.createElement("div",{className:"features features-1"},r.a.createElement(I.a,{icon:C.h,size:"4x",className:"icon"}),r.a.createElement("h3",null,"Create and share your own library"),r.a.createElement("p",null,"Make your library online and share it with your friends and colleagues. Create a wonderful community of books!")),r.a.createElement("div",{className:"features features-2"},r.a.createElement(I.a,{icon:C.a,size:"4x",className:"icon"}),r.a.createElement("h3",null,"Keep track of your physical books"),r.a.createElement("p",null,"Register your books easily and efficiently with their ISBN number and add your own review before you borrow them to your friends!")),r.a.createElement("div",{className:"features features-3"},r.a.createElement(I.a,{icon:C.b,size:"4x",className:"icon"}),r.a.createElement("h3",null,"Find and contribute to other libraries"),r.a.createElement("p",null,"Search for available libraries nearby you can borrow books from... And ask to be a part of them!")),r.a.createElement("div",{className:"home-location"},r.a.createElement(I.a,{icon:C.c,size:"4x",className:"icon"}),r.a.createElement("h3",null,"Find libraries near you"))),r.a.createElement("div",{className:"testimonials features"},r.a.createElement("h2",null,"Testimonials"),r.a.createElement(v.a,{activeIndex:t,next:this.next,previous:this.previous},r.a.createElement(y.a,{items:O,activeIndex:t,onClickHandler:this.goToIndex}),a,r.a.createElement(k.a,{direction:"prev",directionText:"Previous",onClickHandler:this.previous}),r.a.createElement(k.a,{direction:"next",directionText:"Next",onClickHandler:this.next}))))}}]),t}(n.Component),S=a(32),w=a(27),N=a.n(w),L=N.a.create({baseURL:"/api",withCredentials:!0}),D=function(e){if(console.error(e),e.response&&e.response.data)throw console.error("API response",e.response.data),e.response.data.message;throw e},x={service:L,isLoggedIn:function(){return null!=localStorage.getItem("user")},getLocalStorageUser:function(){return JSON.parse(localStorage.getItem("user"))},signup:function(e){return L.post("/signup",e).then(function(e){return localStorage.setItem("user",JSON.stringify(e.data)),e.data}).catch(D)},login:function(e,t){return L.post("/login",{email:e,password:t}).then(function(e){return localStorage.setItem("user",JSON.stringify(e.data)),e.data}).catch(D)},logout:function(){return localStorage.removeItem("user"),L.get("/logout")},getLibraries:function(){return L.get("/libraries/").then(function(e){return e.data}).catch(D)},getLibrary:function(e){return L.get("/libraries/".concat(e)).then(function(e){return e.data}).catch(D)},updateLibrary:function(e,t){return L.put("/libraries/".concat(e),t).then(function(e){return e.data}).catch(D)},deleteLibrary:function(e){return L.delete("/libraries/".concat(e)).then(function(e){return e.data}).catch(D)},createLibrary:function(e){return L.post("/libraries",e).then(function(e){return e.data}).catch(D)},showProfile:function(){return L.get("/profile").then(function(e){return e.data}).catch(D)},editProfile:function(e){return L.put("/profile",e).then(function(e){return e.data}).catch(D)},getBook:function(e){return L.get("/books/".concat(e)).then(function(e){return e.data}).catch(D)},updateBook:function(e,t){return L.put("/books/".concat(e),t).then(function(e){return e.data}).catch(D)},deleteBook:function(e){return L.delete("/books/".concat(e)).then(function(e){return e.data}).catch(D)},addBookWithForm:function(e){return L.post("/books/",e).then(function(e){return e.data}).catch(D)},getMember:function(e){return L.get("/members/".concat(e)).then(function(e){return e.data}).catch(D)},getAllMember:function(e){return L.get("/members/all/".concat(e)).then(function(e){return e.data}).catch(D)},createMember:function(e){return L.post("/members",{_library:e}).then(function(e){return e.data}).catch(D)},deleteMember:function(e,t){return L.delete("/members/".concat(e,"/").concat(t)).then(function(e){return e.data}).catch(D)},sendEmail:function(e,t){return L.post("/report-problem/".concat(e),t).then(function(e){return e.data}).catch(D)},sendInvitation:function(e,t){return L.post("/send-invitation/".concat(e),t).then(function(e){return e.data}).catch(D)},addPicture:function(e){var t=new FormData;return t.append("picture",e),L.post("/endpoint/to/add/a/picture",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data}).catch(D)}},A=a(99),T=a(100),B=a(101),F=a(102),M=a(103),_=a(98),P=a(104),R=a(105),Y=a(106),z=a(107),H=a(13),W=a(97),U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={name:"",address:"",description:"",showEditForm:!0,picture:null,libraryId:a.props.theLibrary._id},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(p.a)(Object(p.a)(a))),a.handleFileChange=a.handleFileChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleFileChange",value:function(e){console.log("The file added by the user is: ",e.target.files[0]),this.setState({picture:e.target.files[0]})}},{key:"handleFormSubmit",value:function(e){var t=this,a=new FormData;a.append("name",this.state.name),a.append("address",this.state.address),a.append("picture",this.state.picture),a.append("description",this.state.description),x.updateLibrary(this.state.libraryId,a).then(function(e){t.props.updateLibrary(),console.log("DID IT WORK???",e),t.setState({message:"library was updated!",showEditForm:!t.state.showEditForm}),setTimeout(function(){t.setState({message:null})},2e3)}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"showEditForm",value:function(){this.setState({showEditForm:!this.state.showEditForm})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"editForm"},this.state.showEditForm?r.a.createElement(E.a,{onClick:function(t){return e.showEditForm(t)},outline:!0,color:"info",size:"sm"},"Edit Library"):r.a.createElement("form",null,"Name:"," ",r.a.createElement(W.a,{type:"Name",value:this.state.Name,name:"name",onChange:this.handleInputChange})," ","Address:"," ",r.a.createElement(W.a,{type:"text",value:this.state.address,name:"address",onChange:this.handleInputChange})," ","Picture:"," ",r.a.createElement(W.a,{type:"file",name:"picture",onChange:this.handleFileChange})," ",r.a.createElement("br",null),"Description:"," ",r.a.createElement(W.a,{type:"text",value:this.state.description,name:"description",cols:"20",rows:"5",onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement(E.a,{outline:!0,color:"info",onClick:function(){return e.handleFormSubmit()}},"Confirm")))}}]),t}(r.a.Component),Q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).deleteMemberADMIN=function(){x.deleteMember(a.props.memberToBeDeletedId,a.state.libraryId).then(function(e){console.log("MEMBER DELETED!",e),a.props.onDelete()})},a.state={showDeleteAlert:!0,libraryId:a.props.theLibrary._id},a.showDeleteAlert=a.showDeleteAlert.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"showDeleteAlert",value:function(){this.setState({showDeleteAlert:!this.state.showDeleteAlert})}},{key:"render",value:function(){return r.a.createElement("div",{className:"editForm"},this.state.showDeleteAlert?r.a.createElement(E.a,{onClick:this.showDeleteAlert,className:"btn btn-danger"},"Remove"):r.a.createElement(_.a,{color:"danger"},"Are you sure you want to remove this member?",r.a.createElement("br",null),r.a.createElement(E.a,{onClick:this.deleteMemberADMIN,className:"btn btn-danger"},"Delete!"),r.a.createElement(E.a,{onClick:this.showDeleteAlert,className:"btn btn-danger"},"No!")))}}]),t}(r.a.Component),G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).updateLibrary=function(){x.getLibrary(a.props.match.params.libraryId).then(function(e){a.setState({library:e.library})}).catch(function(e){return console.log(e)})},a.state={response:{library:{},book:[]},member:null,allmembers:null,showAlertLeaveLibrary:!1,showAlertDeleteLibrary:!1,showAlertDeleteMember:!1},a.toggleAlertLeaveLibrary=a.toggleAlertLeaveLibrary.bind(Object(p.a)(Object(p.a)(a))),a.toggleAlertDeleteLibrary=a.toggleAlertDeleteLibrary.bind(Object(p.a)(Object(p.a)(a))),a.toggleAlertDeleteMember=a.toggleAlertDeleteMember.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"toggleAlertLeaveLibrary",value:function(){this.setState({showAlertLeaveLibrary:!this.state.showAlertLeaveLibrary})}},{key:"toggleAlertDeleteLibrary",value:function(){this.setState({showAlertDeleteLibrary:!this.state.showAlertDeleteLibrary})}},{key:"toggleAlertDeleteMember",value:function(){this.setState({showAlertDeleteMember:!this.state.showAlertDeleteMember})}},{key:"joinLibrary",value:function(e){var t=this;e.preventDefault(),x.createMember(this.props.match.params.libraryId).then(function(e){console.log("CREATED MEMBER",e.role),t.setState({message:"Your book '".concat(t.state.title,"' has been created"),member:e}),setTimeout(function(){t.setState({message:null})},2e3)}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"leaveLibrary",value:function(){var e=this;x.deleteMember(this.state.member._id,this.props.match.params.libraryId).then(function(t){console.log("MEMBER DELETED!",t),x.getLibrary(e.props.match.params.libraryId).then(function(t){e.setState({library:t.library,book:t.book}),x.getMember(e.props.match.params.libraryId).then(function(t){e.setState({member:t[0]}),e.toggleAlertLeaveLibrary()})})})}},{key:"deleteLibrary",value:function(){var e=this;x.deleteLibrary(this.props.match.params.libraryId).then(function(t){console.log("THE LIBRARY WAS DELETED!",t),e.props.history.push("/profile")}).catch(function(e){return console.log(e)})}},{key:"handleDeleteMember",value:function(e){this.setState({allmembers:this.state.allmembers.filter(function(t,a){return a!==e})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"LibraryDetail"},!this.state.library&&r.a.createElement("div",null,"Loading..."),this.state.library&&r.a.createElement("div",{className:"libraryCard"},r.a.createElement("img",{src:this.state.library.picture,alt:"library-img",className:"library-pic"}),r.a.createElement(A.a,null,r.a.createElement(T.a,null,r.a.createElement(B.a,null,r.a.createElement("b",null,this.state.library.name)),r.a.createElement(F.a,null,r.a.createElement(I.a,{icon:C.c,size:"1x",className:"icon"})," ",this.state.library.address),r.a.createElement(M.a,null,this.state.library.description),this.state.member&&"admin"===this.state.member.role&&r.a.createElement(E.a,{onClick:this.toggleAlertDeleteLibrary,className:"delete-libr-btn"},r.a.createElement(I.a,{icon:C.f,size:"1x",className:"icon"})," ","Delete Library"),r.a.createElement(_.a,{color:"info",isOpen:this.state.showAlertDeleteLibrary,toggle:this.toggleAlertDeleteLibrary},"Are you sure you want to delete this library? ",r.a.createElement("br",null),r.a.createElement(E.a,{onClick:function(t){return e.deleteLibrary(t)},className:"btn btn-danger"},"Delete!"),r.a.createElement(E.a,{onClick:this.toggleAlertDeleteLibrary,className:"send-invitation-btn"},"No!")),!this.state.member&&r.a.createElement(E.a,{onClick:function(t){return e.joinLibrary(t)},className:"btn btn-info"},"Join"),this.state.member&&"member"===this.state.member.role&&r.a.createElement(E.a,{onClick:this.toggleAlertLeaveLibrary,className:"btn btn-info"},"Leave"),r.a.createElement(_.a,{color:"info",isOpen:this.state.showAlertLeaveLibrary,toggle:this.toggleAlertLeaveLibrary},"Are you sure you want to leave this library? ",r.a.createElement("br",null),r.a.createElement(E.a,{onClick:function(t){return e.leaveLibrary(t)},className:"btn btn-danger"},"Leave!"),r.a.createElement(E.a,{onClick:this.toggleAlertLeaveLibrary,className:"btn btn-info"},"Stay!")),this.state.member&&r.a.createElement(E.a,{href:"/send-invitation/".concat(this.state.library._id),className:"send-invitation-btn"},"Send Invitation")),"admin"===this.state.role&&r.a.createElement(U,{updateLibrary:this.updateLibrary,theLibrary:this.state.library}))),r.a.createElement("h3",null,"Available Books"),!this.state.book&&r.a.createElement("div",null,"Loading..."),this.state.book&&this.state.book.slice(0,2).map(function(e,t){return r.a.createElement("div",{key:e._id},r.a.createElement(A.a,null,r.a.createElement(P.a,null,r.a.createElement(R.a,null,r.a.createElement(Y.a,{top:!0,width:"100%",src:e.picture,alt:"Card image cap",className:"book-pic"})),r.a.createElement(R.a,null,r.a.createElement(T.a,null,r.a.createElement(B.a,null,r.a.createElement("strong",null,e.name)),r.a.createElement(F.a,null,e.author),r.a.createElement(M.a,{className:"small"},e.description),r.a.createElement(E.a,{size:"sm",tag:z.a,to:"/book-detail/".concat(e._id),className:"send-invitation-btn"},"See details"))))))}),r.a.createElement(E.a,{outline:!0,color:"info",size:"sm",tag:z.a,to:"/".concat(this.props.match.params.libraryId,"/books")}," ","See all Books"),r.a.createElement(E.a,{outline:!0,color:"info",size:"sm",tag:z.a,to:"/".concat(this.props.match.params.libraryId,"/add-book")}," ","Add new Book"),r.a.createElement("div",{className:"memberList"},r.a.createElement("h3",null,"Members"),this.state.allmembers&&this.state.allmembers.map(function(t,a){return r.a.createElement("div",{key:t._id},r.a.createElement(A.a,null,r.a.createElement(P.a,null,r.a.createElement(R.a,{xs:"3"},r.a.createElement(Y.a,{top:!0,width:"100%",src:t._user.picture,alt:"Card image cap"})),r.a.createElement(R.a,{xs:"9"},r.a.createElement(T.a,null,r.a.createElement(B.a,null,r.a.createElement("b",null,t._user.username)),r.a.createElement(P.a,null,r.a.createElement(R.a,{xs:"6"},r.a.createElement(E.a,{size:"sm",tag:z.a,to:"/profile/".concat(t._user._id),className:"send-invitation-btn small"},"See details")),r.a.createElement(R.a,{xs:"6"},e.state.member&&"admin"===e.state.member.role&&r.a.createElement(Q,{onDelete:function(){return e.handleDeleteMember(a)},memberToBeDeletedId:t._id,theLibrary:e.state.library}))))))))})))}},{key:"componentDidMount",value:function(){var e=this;x.getLibrary(this.props.match.params.libraryId).then(function(t){e.setState({library:t.library,book:t.book}),Promise.all([x.getMember(e.props.match.params.libraryId),x.getAllMember(e.props.match.params.libraryId)]).then(function(t){var a=Object(S.a)(t,2),n=a[0],r=a[1];e.setState({member:n[0],allmembers:r}),console.log("THIS IS THE LOGGED MEMBER:",e.state.member),console.log("THERE ARE THE MEMBERS--------\x3e",e.state.allmembers)})}).catch(function(e){return console.log(e)})}}]),t}(n.Component),J=a(108),K=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={response:{library:{},book:{}},member:[],search:"",message:""},a.changeSearch=a.changeSearch.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"changeSearch",value:function(e){this.setState({search:e.target.value})}},{key:"deleteBook",value:function(e,t){var a=this;console.log("IS THIS THE BOOK YOU WANT TO DELETE?",t._id),e.preventDefault(),x.deleteBook(t._id).then(function(e){console.log("DID IT WORK???",e),x.getLibrary(a.props.match.params.libraryId).then(function(e){a.setState({message:"Your book was deleted successfully",library:e.library,book:e.book})})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"LibraryBooks"},(!this.state.book||!this.state.library)&&r.a.createElement("div",null,"Loading... Make sure you're inside a library!"),this.state.book&&r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"List of Books"),r.a.createElement("p",null,r.a.createElement("input",{type:"text",value:this.state.search,onChange:this.changeSearch}),r.a.createElement("br",null),"Filter by book title"),r.a.createElement(E.a,{href:"/".concat(this.state.library,"/add-book"),color:"primary"},"Add book"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("ul",null,this.state.book.filter(function(t){return t.title.toUpperCase().includes(e.state.search.toUpperCase())}).map(function(t){return r.a.createElement("li",{key:t._id},r.a.createElement("div",{className:"CardMain"},r.a.createElement(A.a,null,r.a.createElement(J.a,null,r.a.createElement(P.a,null,r.a.createElement(R.a,{xs:"3"},r.a.createElement(Y.a,{top:!0,width:"20%",src:t.picture,alt:'"'.concat(t.title,'-cover"')})),r.a.createElement(R.a,{xs:"9"},r.a.createElement(T.a,null,r.a.createElement(B.a,null,"Title: ",t.title),r.a.createElement(B.a,null,"Author: ",t.author),r.a.createElement(F.a,null,"Genre: ",t.genre),r.a.createElement(M.a,null,"Description: ",t.description),"admin"===e.state.role&&r.a.createElement(E.a,{color:"danger",onClick:function(a){return e.deleteBook(a,t)}},"Delete Book"),t._currentOwner&&"000000000000000000000000"!==t._currentOwner&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(_.a,{color:"warning"},"This book is not available at the moment - It has been borrowed.")))))))),r.a.createElement("br",null))})))))}},{key:"componentDidMount",value:function(){var e=this;Promise.all([x.getLibrary(this.props.match.params.libraryId),x.getMember(this.props.match.params.libraryId)]).then(function(t){var a=Object(S.a)(t,2),n=a[0],r=a[1];console.log("response-------\x3e",n),e.setState({library:n.library,book:n.book,role:r[0].role}),console.log("ARE YOU AN ADMIN?? ROLE:",e.state.role),console.log("currentOwner--------\x3e",e.state.book[0]._currentOwner)}).catch(function(e){return console.log(e)})}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={search:"",results:[],isLoading:!1},a.handleSearchChange=a.handleSearchChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSearchChange",value:function(e){var t=this;this.setState({search:e.target.value,isLoading:!0}),clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){t.performSearch()},1e3)}},{key:"performSearch",value:function(){var e=this;""!==this.state.search?N.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.search,".json?access_token=").concat("pk.eyJ1IjoibWMxMDBzIiwiYSI6ImNqb2E2ZTF3ODBxa3czd2xldHp1Z2FxbGYifQ.U4oatm5RsTXXHQLz5w66dQ")).then(function(t){e.setState({results:t.data.features,isLoading:!1})}):this.setState({results:[],isLoading:!1})}},{key:"handleItemClicked",value:function(e){this.setState({search:e.place_name,results:[]}),this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AutocompletePlace"},r.a.createElement("input",{className:"AutocompletePlace-input",type:"text",value:this.state.search,onChange:this.handleSearchChange,placeholder:"Type an address"}),r.a.createElement("ul",{className:"AutocompletePlace-results"},this.state.results.map(function(t){return r.a.createElement("li",{key:t.id,className:"AutocompletePlace-items",onClick:function(){return e.handleItemClicked(t)}},t.place_name)}),this.state.isLoading&&r.a.createElement("li",{className:"AutocompletePlace-items"},"Loading...")))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={name:"",picture:null,address:"",description:"",message:null},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a.handleFileChange=a.handleFileChange.bind(Object(p.a)(Object(p.a)(a))),a.handleSelect=a.handleSelect.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSelect",value:function(e){this.setState({place:e})}},{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleFileChange",value:function(e){console.log("The file added by the user is: ",e.target.files[0]),this.setState({picture:e.target.files[0]})}},{key:"addLibraryAndRedirectToProfile",value:function(e){var t=this,a=new FormData;a.append("name",this.state.name),a.append("picture",this.state.picture),a.append("address",this.state.place.place_name),a.append("coordinates_lng",this.state.place.center[0]),a.append("coordinates_lat",this.state.place.center[1]),a.append("description",this.state.description),x.createLibrary(a).then(function(e){console.log("SUCCESS!",e),t.setState({message:"Your library '".concat(t.state.name,"' has been created")}),t.props.history.push("/profile"),setTimeout(function(){t.setState({message:null})},2e3)}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AddLibrary"},r.a.createElement("h2",null,"Add Library"),r.a.createElement("form",null,"Name:"," ",r.a.createElement(W.a,{type:"text",value:this.state.name,name:"name",onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Picture:"," ",r.a.createElement(W.a,{type:"file",name:"picture",onChange:this.handleFileChange})," ",r.a.createElement("br",null),"Address:"," ",r.a.createElement(Z,{onSelect:this.handleSelect}),r.a.createElement("br",null),"Description:"," ",r.a.createElement(W.a,{type:"textarea",value:this.state.description,name:"description",cols:"20",rows:"5",onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement(E.a,{color:"primary",onClick:function(t){return e.addLibraryAndRedirectToProfile(t)}},"Create Library")),this.state.message&&r.a.createElement("div",{className:"info"},this.state.message))}}]),t}(n.Component),X=a(109),V=a(126),$=a(110),ee=a(111),te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={title:"",author:"",genre:"",picture:null,pictureUrl:null,description:"",rating:"",pages:"",isbn:"",language:"",message:null,isbn_message:null,modal:!1,_library:a.props.match.params.libraryId},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a.handleFileChange=a.handleFileChange.bind(Object(p.a)(Object(p.a)(a))),a.toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{modal:!e.modal}})}},{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleFileChange",value:function(e){console.log("The file added by the user is: ",e.target.files[0]),this.setState({picture:e.target.files[0]})}},{key:"getInfoFromApi",value:function(e){var t=this;N.a.get("https://www.googleapis.com/books/v1/volumes?q=isbn:".concat(this.state.isbn)).then(function(e){console.log("response.imageLinks[0]---\x3e",e.data.items[0].volumeInfo.imageLinks.thumbnail),t.setState({title:e.data.items[0].volumeInfo.title,author:e.data.items[0].volumeInfo.authors[0],genre:e.data.items[0].volumeInfo.categories?e.data.items[0].volumeInfo.categories[0]:"Provide a genre",picture:e.data.items[0].volumeInfo.imageLinks.thumbnail,description:e.data.items[0].volumeInfo.description,rating:e.data.items[0].volumeInfo.averageRating,pages:e.data.items[0].volumeInfo.pageCount,language:e.data.items[0].volumeInfo.language,isbn:e.data.items[0].volumeInfo.industryIdentifiers[1].identifier,isbn_message:"Your book's name is ".concat(e.data.items[0].volumeInfo.title,". If this information is wrong, fill below the form with the correct information"),_library:"ObjectId(".concat(t.props.match.params.libraryId,")")}),console.log("this.state.picture---\x3e",t.state.picture),console.log("this.state.title---\x3e",t.state.title)}).catch(function(e){return t.setState({isbn_message:"We do not have this book in our database. Please fill the form"})})}},{key:"addBookAndRedirectToLibraryPage",value:function(e){var t=this;console.log("this.state.picture---\x3e",this.state.picture);var a=new FormData;a.append("title",this.state.title),a.append("author",this.state.author),a.append("picture",this.state.picture),a.append("genre",this.state.genre),a.append("description",this.state.description),a.append("rating",this.state.rating),a.append("pages",this.state.pages),a.append("language",this.state.language),a.append("isbn",this.state.isbn),a.append("_library",this.props.match.params.libraryId),console.log("uploadData-------\x3e",a),x.addBookWithForm(a).then(function(e){console.log("result---------\x3e",e),t.setState({message:"Your book '".concat(t.state.title,"' has been created")}),setTimeout(function(){t.setState({message:null})},2e3)}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AddBook"},!this.state._library&&r.a.createElement("div",null,"Loading... This is probably not a valid Library!  "),this.state._library&&r.a.createElement("div",{className:"AddBook"},r.a.createElement("h2",null,"Add Book"),r.a.createElement("h3",null,"Use ISBN to help us find the information about your book"),r.a.createElement(X.a,null,"ISBN: ",r.a.createElement(W.a,{type:"number",value:this.state.isbn,name:"isbn",onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement(E.a,{color:"primary",onClick:function(t){return e.getInfoFromApi(t)}},"Check your book's info")," ",r.a.createElement("br",null)),this.state.isbn_message&&r.a.createElement("div",{className:"info"},this.state.isbn_message),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(E.a,{color:"primary",onClick:this.toggle},"What is ISBN?"),r.a.createElement(V.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},r.a.createElement($.a,{toggle:this.toggle},"What is ISBN?"),r.a.createElement(ee.a,{className:"modal-body"},r.a.createElement("img",{src:"../../../images/isbn-location.png",alt:"isbn-location"}),r.a.createElement("br",null),"An ISBN gets placed on the copyright page inside the book and, if there is no bar code, on the back cover.",r.a.createElement("br",null),"It can have 10 or 13 digits."))),r.a.createElement("br",null),r.a.createElement("h3",null,"Or fill the form manually. Don't worry, it's quite short!"),r.a.createElement(X.a,null,"Title: ",r.a.createElement(W.a,{type:"text",value:this.state.title,name:"title",onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Author: ",r.a.createElement(W.a,{type:"text",value:this.state.author,name:"author",onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Genre: ",r.a.createElement(W.a,{type:"text",value:this.state.genre,name:"genre",onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Picture:",r.a.createElement("img",{src:this.state.picture,alt:""}),r.a.createElement("br",null),r.a.createElement(W.a,{type:"file",name:"picture",onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Rating: ",r.a.createElement(W.a,{type:"number",value:this.state.rating,name:"rating",onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Pages: ",r.a.createElement(W.a,{type:"number",value:this.state.pages,name:"pages",onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Language: ",r.a.createElement(W.a,{type:"text",value:this.state.language,name:"language",onChange:this.handleInputChange})," ",r.a.createElement("br",null),"ISBN: ",r.a.createElement(W.a,{type:"number",value:this.state.isbn,name:"isbn",onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Description: ",r.a.createElement(W.a,{type:"textarea",value:this.state.description,name:"description",cols:"20",rows:"5",onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement(E.a,{color:"primary",onClick:function(t){return e.addBookAndRedirectToLibraryPage(t)}},"Create Book")),this.state.message&&r.a.createElement("div",{className:"info"},this.state.message),r.a.createElement(E.a,{color:"primary",href:"/libraries/".concat(this.props.match.params.libraryId)},"Go Back")))}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={response:{user:null,book:null}},a.calculateDueDate=a.calculateDueDate.bind(Object(p.a)(Object(p.a)(a))),a.untilDueDate=a.untilDueDate.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"borrowBook",value:function(e){var t=this;e.preventDefault(),console.log("THIS IS THE ID LOOOOK",this.props.match.params.bookId),x.updateBook(this.props.match.params.bookId,{title:this.state.book.title,author:this.state.book.author,genre:this.state.book.genre,picture:this.state.book.picture,description:this.state.book.description,rating:this.state.book.rating,pages:this.state.book.pages,language:this.state.book.language,_currentOwner:this.state.user,borrowedDate:Date.now(),comments:this.state.book.comments,status:"Unavailable"}).then(function(e){console.log("DID IT WORK???",e),t.setState({book:e.response,message:"You borrowed '".concat(t.state.book.title,"'. You have ").concat(t.untilDueDate()," days to give it back")})})}},{key:"calculateDueDate",value:function(){if(this.state.book){var e=this.state.book.borrowedDate,t=new Date(e);return t.setDate(t.getDate()+30),t}return 0}},{key:"untilDueDate",value:function(){if(this.state.book){var e=this.calculateDueDate(),t=Date.now(),a=e.getTime(),n=t,r=Math.abs(n-a);return Math.round(r/864e5)}return 0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,!this.state.book&&r.a.createElement("div",null,"Loading..."),this.state.book&&r.a.createElement("div",{className:"bookCard"},r.a.createElement(A.a,null,r.a.createElement(P.a,null,r.a.createElement(R.a,null,r.a.createElement(Y.a,{top:!0,width:"100%",src:this.state.book.picture,alt:"Card image cap"})),r.a.createElement(T.a,null,r.a.createElement(B.a,{tag:"h3"},r.a.createElement("strong",null,this.state.book.title)),r.a.createElement(F.a,{tag:"h4"},this.state.book.author),r.a.createElement(M.a,null,this.state.book.description,r.a.createElement("br",null),r.a.createElement("strong",null,"Rating: "),this.state.book.rating,r.a.createElement("br",null),r.a.createElement("strong",null,"Pages: "),this.state.book.pages,r.a.createElement("br",null),r.a.createElement("strong",null,"ISBN: "),this.state.book.isbn,r.a.createElement("br",null)),"Available"===this.state.book.status&&r.a.createElement(E.a,{onClick:function(t){return e.borrowBook(t)},outline:!0,color:"info"},"Borrow"),r.a.createElement("br",null),r.a.createElement(E.a,{href:"/book-detail/".concat(this.state.book._id,"/add-review"),outline:!0,color:"info"},"Add a review"),r.a.createElement("br",null),r.a.createElement(E.a,{href:"/report-problem/".concat(this.state.book._library),outline:!0,color:"info",size:"sm"},"Report a problem"),r.a.createElement("br",null),r.a.createElement(E.a,{color:"primary",href:"/profile"},"Go Back"),r.a.createElement("br",null),this.state.message&&r.a.createElement("div",{className:"info"},this.state.message)))),r.a.createElement(A.a,{className:"reviewContainer"},r.a.createElement(T.a,null,r.a.createElement(B.a,{tag:"h4"},"Reviews"),r.a.createElement(M.a,null,this.state.book.comments.map(function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("strong",null,'"',e.title,'"'),r.a.createElement("br",null),"Author: ",e.author,r.a.createElement("br",null),"Review: ",e.text,r.a.createElement("br",null),r.a.createElement("strong",null,"Rating:")," ",e.rating,r.a.createElement("br",null))}))))))}},{key:"componentDidMount",value:function(){var e=this;x.getBook(this.props.match.params.bookId).then(function(t){e.setState({user:t.user,book:t.response})}).catch(function(e){return console.log(e)})}}]),t}(n.Component),ne=a(112),re=a(113),le=a(114),ie=a(115),oe=a(116),se=a(117),ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).toggle=a.toggle.bind(Object(p.a)(Object(p.a)(a))),a.state={isOpen:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"handleLogoutClick",value:function(e){x.logout()}},{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ne.a,{style:{backgroundColor:"#662D91"},dark:!0,expand:"md"},r.a.createElement(re.a,{onClick:this.toggle}),r.a.createElement(le.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(ie.a,{className:"ml-auto",navbar:!0},r.a.createElement(oe.a,null,r.a.createElement(se.a,{tag:z.a,to:"/"},"Home")),r.a.createElement(oe.a,null,x.isLoggedIn()&&r.a.createElement(se.a,{tag:z.a,to:"/profile"},"Profile")),r.a.createElement(oe.a,null,!x.isLoggedIn()&&r.a.createElement(se.a,{tag:z.a,to:"/login"},"Login")),r.a.createElement(oe.a,null,!x.isLoggedIn()&&r.a.createElement(se.a,{tag:z.a,to:"/signup"},"Signup")),r.a.createElement(oe.a,null,x.isLoggedIn()&&r.a.createElement(se.a,{tag:z.a,to:"/",onClick:function(t){return e.handleLogoutClick(t)}},"Logout"))))))}}]),t}(r.a.Component),ue=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Footer"},"Made with \u2764 by SmartShelf at Ironhack")}}]),t}(r.a.Component),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",message:null},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),x.login(this.state.email,this.state.password).then(function(e){console.log("SUCCESS!"),t.props.history.push("/profile")}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Login"},r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Login"),r.a.createElement(X.a,null,"E-mail",r.a.createElement("br",null),r.a.createElement("input",{type:"text",value:this.state.email,name:"email",onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement("br",null),"Password",r.a.createElement("br",null),r.a.createElement("input",{type:"password",value:this.state.password,name:"password",onChange:this.handleInputChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,{tag:"a",outline:!0,color:"info",onClick:function(t){return e.handleClick(t)}},"Login")),r.a.createElement("p",null,"Don't have an account yet? ",r.a.createElement("a",{href:"/signup"},"Sign up")),this.state.message&&r.a.createElement("div",{className:"info info-danger"},this.state.message)))}}]),t}(n.Component),he=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={email:"",username:"",password:"",message:null},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleClick",value:function(e){var t=this;e.preventDefault();var a={email:this.state.email,username:this.state.username,password:this.state.password};x.signup(a).then(function(e){console.log("SUCCESS!"),t.props.history.push("/profile")}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Signup"},r.a.createElement("h2",null,"Sign up"),r.a.createElement("form",null,"Email ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",value:this.state.email,name:"email",onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement("br",null),"Username ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",value:this.state.username,name:"username",onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement("br",null),"Password ",r.a.createElement("br",null),r.a.createElement("input",{type:"password",value:this.state.password,name:"password",onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,{tag:"a",outline:!0,color:"info",onClick:function(t){return e.handleClick(t)}},"Sign up")),r.a.createElement("p",null,"Already have an account? ",r.a.createElement("a",{href:"/login"},"Login")),this.state.message&&r.a.createElement("div",{className:"info info-danger"},this.state.message))}}]),t}(n.Component),de=a(118),be=a(24),pe=a.n(be);a(88);pe.a.accessToken="pk.eyJ1IjoiZ3RjYXJtb25hIiwiYSI6ImNqdWwxYzZwOTAzeWE0NGxsbjJ0ZnJ0aDYifQ.GIzsIahO6WNQFMg486tFkA";var ge=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={lng:"",lat:"",libraries:null},a.getCurrentCoordinates=a.getCurrentCoordinates.bind(Object(p.a)(Object(p.a)(a))),a.initMap=a.initMap.bind(Object(p.a)(Object(p.a)(a))),a.mapRef=r.a.createRef(),a.map=null,a.marker=null,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"initMap",value:function(e,t){this.map=new pe.a.Map({container:this.mapRef.current,style:"mapbox://styles/mapbox/streets-v11",center:[e,t],zoom:12}),this.map.addControl(new pe.a.NavigationControl),this.marker=new pe.a.Marker({color:"purple"}).setLngLat([e,t]).addTo(this.map);for(var a=0;a<this.state.libraries.length;a++){var n=(new pe.a.Popup).setHTML('<a href="http://localhost:3000/libraries/'.concat(this.state.libraries[a]._id,'"<b>').concat(this.state.libraries[a].name,"</b> <br>\n          </a>\n        ")),r=this.state.libraries[a].coordinates[0],l=this.state.libraries[a].coordinates[1];new pe.a.Marker({color:"yellow"}).setLngLat([r,l]).setPopup(n).addTo(this.map)}}},{key:"getCurrentCoordinates",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){console.log("The current coords are",t.coords),e.setState({lng:t.coords.longitude,lat:t.coords.latitude})})}},{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"LibraryLocations"},r.a.createElement("h1",null,"Find libraries around you!"),r.a.createElement(E.a,{className:"btn btn-info",onClick:this.getCurrentCoordinates},"Get Current Coordinates"),r.a.createElement(P.a,{className:"my-4"},r.a.createElement(R.a,{sm:3},r.a.createElement(de.a,{for:"exampleEmail"},"Coordinates")),r.a.createElement(R.a,null,r.a.createElement(W.a,{type:"number",value:this.state.lng,onChange:this.handleInputChange,name:"lng",placeholder:"Longitude"})),r.a.createElement(R.a,null,r.a.createElement(W.a,{type:"number",value:this.state.lat,onChange:this.handleInputChange,name:"lat",placeholder:"Latitude"}))),r.a.createElement(E.a,{className:"btn btn-info",onClick:function(){return e.initMap(e.state.lng,e.state.lat)}},"Find libraries!"),r.a.createElement("div",{className:"mapbox",ref:this.mapRef,style:{height:400}}))}},{key:"componentDidMount",value:function(){var e=this;x.getLibraries().then(function(t){console.log("TCL: Map -> componentDidMount -> libraries.response",t.response),e.setState({libraries:t.response})})}}]),t}(n.Component),fe=a(122),Ee=a(123),ve=a(35),ye=a(119),ke=a(120),Ie=a(121),Ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"",phoneNumber:"",favoriteBooks:"",favoriteQuote:"",showEditForm:!0},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a.handleFormSubmit=a.handleFormSubmit.bind(Object(p.a)(Object(p.a)(a))),a.handleFileChange=a.handleFileChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleFileChange",value:function(e){console.log("The file added by the user is: ",e.target.files[0]),this.setState({picture:e.target.files[0]})}},{key:"handleFormSubmit",value:function(e){var t=this,a=new FormData;a.append("username",this.state.username),a.append("picture",this.state.picture),a.append("phoneNumber",this.state.phoneNumber),a.append("favoriteBooks",this.state.favoriteBooks),a.append("favoriteQuote",this.state.favoriteQuote),x.editProfile(a).then(function(e){console.log("DID IT WORK???",e),t.props.updateProfile(),t.setState({message:"Your profile was updated!",showEditForm:!t.state.showEditForm}),setTimeout(function(){t.setState({message:null})},2e3)}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"showEditForm",value:function(){this.setState({showEditForm:!this.state.showEditForm})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"editForm"},this.state.showEditForm?r.a.createElement("div",{className:"edit-button",style:{flexDirection:"row"}},r.a.createElement(I.a,{icon:C.g,size:"1x",className:"icon",onClick:function(t){return e.showEditForm(t)}},"edit")):r.a.createElement(X.a,{className:"form-container"},r.a.createElement(ye.a,null,r.a.createElement(de.a,{for:"username"},"Username:"," "),this.state.username?r.a.createElement("div",null,r.a.createElement(W.a,{valid:!0,type:"text",value:this.state.username,name:"username",onChange:this.handleInputChange})," "):r.a.createElement("div",null,r.a.createElement(W.a,{invalid:!0,type:"text",value:this.state.username,name:"username",onChange:this.handleInputChange})," ",r.a.createElement(ke.a,null,"Oh noes! You have to write your username")),r.a.createElement(de.a,{for:"picture"},"Picture:"," "),r.a.createElement(Ie.a,{type:"file",id:"exampleCustomFileBrowser",name:"picture",label:"Bring that smile on!",onChange:this.handleFileChange})," ",r.a.createElement("br",null),r.a.createElement(de.a,{for:"phoneNumber"},"Phone:"," "),r.a.createElement(W.a,{type:"text",value:this.state.phoneNumber,name:"phoneNumber",cols:"20",rows:"5",onChange:this.handleInputChange})," ",r.a.createElement("br",null)),r.a.createElement(ye.a,null,r.a.createElement(de.a,{for:"favoriteBooks"},"Favorite Books:"," "),r.a.createElement(W.a,{type:"text",value:this.state.favoriteBooks,name:"favoriteBooks",cols:"20",rows:"5",onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement(de.a,{for:"favoriteQuote"},"Favorite Quote:"," "),r.a.createElement(W.a,{type:"text",value:this.state.favoriteQuote,name:"favoriteQuote",cols:"20",rows:"5",onChange:this.handleInputChange})," ",r.a.createElement("br",null)),this.state.username?r.a.createElement(E.a,{className:"confirm-profile-button",onClick:function(){return e.handleFormSubmit()}},"Confirm"):r.a.createElement(E.a,{disabled:!0,className:"confirm-profile-button",onClick:function(){return e.handleFormSubmit()}},"Confirm")))}}]),t}(r.a.Component),Oe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).updateProfile=function(){x.showProfile().then(function(e){a.setState({profileInfo:e}),console.log(a.state)}).catch(function(e){return console.log(e)})},a.state={profileInfo:null},a.calculateDueDate=a.calculateDueDate.bind(Object(p.a)(Object(p.a)(a))),a.untilDueDate=a.untilDueDate.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"returnBook",value:function(e,t){var a=this;e.preventDefault(),x.getBook(t._id).then(function(e){x.updateBook(t._id,{status:"Available",_currentOwner:"0".repeat(24),comments:e.response.comments}).then(function(e){a.setState({message:"You returned the book"}),a.updateProfile()})})}},{key:"calculateDueDate",value:function(e){if(this.state.profileInfo.books){var t=new Date(e);return t.setDate(t.getDate()+30),t}return 0}},{key:"untilDueDate",value:function(e){if(this.state.profileInfo.books){var t=this.calculateDueDate(e),a=Date.now(),n=t.getTime()-a;return Math.round(n/864e5)}return 30}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"profilePage"},!this.state.profileInfo&&r.a.createElement("div",null,"Loading..."),this.state.profileInfo&&r.a.createElement("div",null,r.a.createElement("span",{className:"userPic"},r.a.createElement("img",{src:this.state.profileInfo.user.picture,alt:""}),r.a.createElement("br",null)),r.a.createElement(fe.a,null,r.a.createElement(A.a,null,r.a.createElement(T.a,null,r.a.createElement(M.a,{className:"userContainer"},r.a.createElement("span",null,r.a.createElement("span",{className:"userName"},this.state.profileInfo.user.username[0].toUpperCase()+this.state.profileInfo.user.username.substr(1)),r.a.createElement("br",null),this.state.profileInfo.user.favoriteQuote&&r.a.createElement("em",null,'"',this.state.profileInfo.user.favoriteQuote,'"'),r.a.createElement("br",null),r.a.createElement("br",null),this.state.profileInfo.user.favoriteBooks&&r.a.createElement("span",null,r.a.createElement("strong",null,"Favorite book"),r.a.createElement("br",null),this.state.profileInfo.user.favoriteBooks)))),r.a.createElement(Ce,{updateProfile:this.updateProfile})),r.a.createElement(A.a,null,r.a.createElement(T.a,null,r.a.createElement(B.a,{tag:"h3",className:"libraryName"},"My Libraries"),r.a.createElement("div",{className:"infoContainer"},this.state.profileInfo.members.length<1&&r.a.createElement("span",null,"You are not part of any libraries yet!",r.a.createElement("br",null)," Create one or find libraries near you"),this.state.profileInfo.members.length>0&&this.state.profileInfo.members.map(function(e){return r.a.createElement("li",{key:e._library._id},r.a.createElement(ve.a,{to:"/libraries/".concat(e._library._id)},r.a.createElement("div",{className:"library-cover",style:{background:'url("'.concat(e._library.picture,'") no-repeat center'),backgroundSize:"cover"}},r.a.createElement("div",{className:"container-opacity",style:{backgroundColor:"black",backgroundSize:"100%",opacity:"0.5",zIndex:"2"}},r.a.createElement("div",{style:{color:"white"}},e._library.name)))))})),this.state.profileInfo.members.length>2&&r.a.createElement(E.a,{onClick:this.showMore,outline:!0,color:"info",size:"sm"},this.state.expanded?r.a.createElement("span",null,"Show less"):r.a.createElement("span",null,"Show more")),r.a.createElement(J.a,null,r.a.createElement(P.a,{style:{flexDirection:"row"}},r.a.createElement(R.a,null,r.a.createElement(E.a,{className:"add-library-button btn",href:"/add-library"},r.a.createElement(I.a,{icon:C.d,size:"1x",className:"icon"})," Add library")),r.a.createElement(R.a,null,r.a.createElement(E.a,{className:"find-libraries-button btn",href:"/find-libraries"},r.a.createElement(I.a,{icon:C.e,size:"1x",className:"icon"})," Find libraries")))))),r.a.createElement(A.a,null,r.a.createElement(T.a,null,r.a.createElement(B.a,{tag:"h3",className:"bookName"},"Books I borrowed"),r.a.createElement(M.a,{className:"infoContainer"},this.state.profileInfo.books.length<1&&r.a.createElement("span",null,"You haven't borrowed books yet!",r.a.createElement("br",null)," Check your libraries to start reading"),this.state.profileInfo.books.length>0&&this.state.profileInfo.books.map(function(t){return r.a.createElement("li",{key:t._id},r.a.createElement(J.a,null,r.a.createElement(P.a,null,r.a.createElement(R.a,{xs:"3"},r.a.createElement("img",{src:t.picture,alt:""})),r.a.createElement(R.a,{xs:"9"},r.a.createElement("span",null,r.a.createElement("strong",null,"Title: "),t.title,r.a.createElement("br",null),r.a.createElement("strong",null,"Author: "),t.author,r.a.createElement("br",null),Number(e.untilDueDate(t.borrowedDate))<1?r.a.createElement("div",{className:"alert alert-danger small"},"You reached you deadline! Return the book. ",r.a.createElement("strong",null,"You're"," ",Math.abs(Number(e.untilDueDate(t.borrowedDate)))," "," days overdue")):r.a.createElement("div",null,r.a.createElement("strong",null,"Days Left: ")," ",e.untilDueDate(t.borrowedDate)))))),r.a.createElement(E.a,{onClick:function(a){return e.returnBook(a,t)},key:t._id,outline:!0,className:"return-book-button"},"Return Book to library"))})),this.state.profileInfo.members.length>2&&r.a.createElement(E.a,{onClick:this.showMore,outline:!0,color:"info",size:"sm"},this.state.expanded?r.a.createElement("span",null,"Show less"):r.a.createElement("span",null,"Show more"))))),r.a.createElement(Ee.a,{vertical:!0},r.a.createElement(E.a,{href:"/",outline:!0,color:"warning"},"Home"),r.a.createElement(E.a,{href:"/logout",outline:!0,color:"warning"},"Logout")),r.a.createElement("br",null)))}},{key:"componentDidMount",value:function(){var e=this;x.showProfile().then(function(t){e.setState({profileInfo:t})}).catch(function(e){return console.log(e)})}}]),t}(n.Component),je=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={name:"",subject:"",message:"",feedback:""},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this,a={name:this.state.name,subject:this.state.subject,message:this.state.message};""===a.name||""===a.subject||""===a.message?(this.setState({feedback:"Ops! You need to fill all the fields to send"}),setTimeout(function(){t.setState({feedback:null})},5e3)):x.sendEmail(this.props.match.params.libraryId,a).then(function(e){console.log("THIS IS THE RESPONSEEEE",e),t.setState({feedback:"Your email was sent! You'll be redirected"}),setTimeout(function(){t.setState({feedback:null}),t.props.history.push("/profile")},2e3)}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AddBook"},r.a.createElement("h2",null,"Report a problem with this book"),r.a.createElement("form",null,"Name:"," ",r.a.createElement(W.a,{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Subject:"," ",r.a.createElement(W.a,{type:"text",name:"subject",value:this.state.subject,onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Message:"," ",r.a.createElement(W.a,{type:"textarea",name:"message",cols:"20",rows:"5",value:this.state.message,onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement(E.a,{color:"primary",onClick:function(t){return e.handleSubmit(t)}},"Send")),this.state.feedback&&r.a.createElement("div",{className:"info"},this.state.feedback))}}]),t}(n.Component),Se=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={name:"",email:"",feedback:""},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this,a={name:this.state.name,email:this.state.email};""===a.name||""===a.email?(this.setState({feedback:"Ops! You need to fill all the fields to send"}),setTimeout(function(){t.setState({feedback:null})},5e3)):x.sendInvitation(this.props.match.params.libraryId,a).then(function(e){console.log("THIS IS THE RESPONSEEEE",e),t.setState({feedback:"Your email was sent! You'll be redirected"}),setTimeout(function(){t.setState({feedback:null}),t.props.history.push("/libraries/".concat(t.props.match.params.libraryId))},2e3)}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AddBook"},r.a.createElement("h2",null,"Invite friends to join this library"),r.a.createElement("form",null,"What's your friend's name?"," ",r.a.createElement(W.a,{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange})," ",r.a.createElement("br",null),"And your friend's e-mail?"," ",r.a.createElement(W.a,{type:"text",name:"email",value:this.state.email,onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement(E.a,{color:"primary",onClick:function(t){return e.handleSubmit(t)}},"Invite")),this.state.feedback&&r.a.createElement("div",{className:"info"},this.state.feedback))}}]),t}(n.Component),we=a(51),Ne=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={title:"",review:"",rating:"",feedback:""},a.handleInputChange=a.handleInputChange.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this,a={_user:this.state.user,author:this.state.user.username,title:this.state.title,text:this.state.review,rating:this.state.rating};""===a.title||""===a.review||""===a.rating?(this.setState({feedback:"Ops! You need to fill all the fields to send"}),setTimeout(function(){t.setState({feedback:null})},5e3)):x.updateBook(this.props.match.params.bookId,{title:this.state.book.title,author:this.state.book.author,genre:this.state.book.genre,picture:this.state.book.picture,description:this.state.book.description,rating:this.state.book.rating,pages:this.state.book.pages,language:this.state.book.language,_currentOwner:this.state.book._currentOwner,status:this.state.book.status,comments:[].concat(Object(we.a)(this.state.book.comments),[a])}).then(function(e){t.setState({feedback:"Your review was added! You'll be redirected"}),setTimeout(function(){t.setState({feedback:null}),t.props.history.push("/book-detail/".concat(t.props.match.params.bookId))},2e3)}).catch(function(e){return t.setState({message:e.toString()})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"AddBook"},r.a.createElement("h2",null,"Add a review to this book"),r.a.createElement("form",null,"Review title"," ",r.a.createElement(W.a,{type:"text",name:"title",value:this.state.title,onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Write your review here"," ",r.a.createElement(W.a,{type:"textarea",name:"review",value:this.state.review,onChange:this.handleInputChange})," ",r.a.createElement("br",null),"Rate this book from 0 to 5"," ",r.a.createElement(W.a,{type:"number",min:"0",max:"5",maxLength:"1",name:"rating",value:this.state.rating,onChange:this.handleInputChange})," ",r.a.createElement("br",null),r.a.createElement(E.a,{color:"primary",onClick:function(t){return e.handleSubmit(t)}},"Submit review")),this.state.feedback&&r.a.createElement("div",{className:"info"},this.state.feedback))}},{key:"componentDidMount",value:function(){var e=this;Promise.all([x.getBook(this.props.match.params.bookId),x.showProfile()]).then(function(t){console.log("THIS IS THE RESPONSEEEEE",t),e.setState({user:t[1].user,book:t[0].response}),console.log("THIS IS THE STATEEE",e.state)}).catch(function(e){return console.log(e)})}}]),t}(n.Component),Le=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleLogoutClick",value:function(e){x.logout()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ce,{className:"NavBar"}),r.a.createElement("div",{className:"main"},r.a.createElement(d.a,null,r.a.createElement(b.a,{path:"/",exact:!0,component:j}),x.isLoggedIn()?r.a.createElement(b.a,{path:"/profile",component:Oe}):r.a.createElement(b.a,{path:"/profile",component:me}),x.isLoggedIn()?r.a.createElement(b.a,{path:"/add-library",component:q}):r.a.createElement(b.a,{path:"/add-library",component:me}),r.a.createElement(b.a,{path:"/libraries/:libraryId",component:G}),x.isLoggedIn()?r.a.createElement(b.a,{path:"/:libraryId/books",component:K}):r.a.createElement(b.a,{path:"/:libraryId/books",component:me}),x.isLoggedIn()?r.a.createElement(b.a,{path:"/:libraryId/add-book",component:te}):r.a.createElement(b.a,{path:"/:libraryId/add-book",component:me}),x.isLoggedIn()?r.a.createElement(b.a,{path:"/book-detail/:bookId",exact:!0,component:ae}):r.a.createElement(b.a,{path:"/book-detail/:bookId",exact:!0,component:me}),x.isLoggedIn()?r.a.createElement(b.a,{path:"/book-detail/:bookId/add-review",component:Ne}):r.a.createElement(b.a,{path:"/book-detail/:bookId/add-review",component:me}),r.a.createElement(b.a,{path:"/signup",component:he}),r.a.createElement(b.a,{path:"/login",component:me}),r.a.createElement(b.a,{path:"/find-libraries",component:ge}),x.isLoggedIn()?r.a.createElement(b.a,{path:"/report-problem/:libraryId",component:je}):r.a.createElement(b.a,{path:"/report-problem/:libraryId",component:me}),x.isLoggedIn()?r.a.createElement(b.a,{path:"/send-invitation/:libraryId",component:Se}):r.a.createElement(b.a,{path:"/send-invitation/:libraryId",component:me}),r.a.createElement(b.a,{render:function(){return r.a.createElement("h2",null,"404")}}))),r.a.createElement(ue,null))}}]),t}(n.Component);a(89);i.a.render(r.a.createElement(o.a,null,r.a.createElement(Le,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.b8af2afa.chunk.js.map